(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5f3f05a4"],{"1cdb":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("我的密钥")])]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{label:"密钥id"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.id)+" ")]}}])}),a("el-table-column",{attrs:{label:"用户名"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.username)+" ")]}}])}),a("el-table-column",{attrs:{label:"密钥"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.value)+" ")]}}])}),a("el-table-column",{attrs:{label:"绑定ip"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.ip)+" ")]}}])}),a("el-table-column",{attrs:{label:"上次变更时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("i",{staticClass:"el-icon-time"}),t._v(" "+t._s(e.row.last_change_time)+" ")]}}])}),a("el-table-column",{attrs:{label:"上次请求时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("i",{staticClass:"el-icon-time"}),t._v(" "+t._s(e.row.last_query_time)+" ")]}}])}),a("el-table-column",{attrs:{label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{directives:[{name:"show",rawName:"v-show",value:0==e.row.status,expression:"scope.row.status == 0"}],attrs:{type:"success",effect:"dark"}},[t._v("激活")]),a("el-tag",{directives:[{name:"show",rawName:"v-show",value:1==e.row.status,expression:"scope.row.status == 1"}],attrs:{type:"warning",effect:"dark"}},[t._v("警告")]),a("el-tag",{directives:[{name:"show",rawName:"v-show",value:2==e.row.status,expression:"scope.row.status == 2"}],attrs:{type:"info",effect:"dark"}},[t._v("锁定")]),a("el-tag",{directives:[{name:"show",rawName:"v-show",value:3==e.row.status,expression:"scope.row.status == 3"}],attrs:{type:"danger",effect:"dark"}},[t._v("禁用")]),a("el-tag",{directives:[{name:"show",rawName:"v-show",value:4==e.row.status,expression:"scope.row.status == 4"}],attrs:{type:"warning",effect:"dark"}},[t._v("警告并锁定")])]}}])}),a("el-table-column",{attrs:{label:"ip变更"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.changekeyip(e.$index,e.row)}}},[t._v("重新绑定ip")])]}}])}),a("el-table-column",{attrs:{label:"状态变更"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return t.changekeystatus(e.$index,e.row)}}},[t._v("激活密钥")])]}}])})],1)],1),a("el-divider",[a("i",{staticClass:"el-icon-paperclip"})]),a("el-card",{staticClass:"box-card1"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("生成链接")]),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text",size:"small"},on:{click:t.business_info_1}},[t._v("帮助")])],1),a("div",{staticClass:"text item"},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"当日数据查询链接生成位置"},model:{value:t.textarea1,callback:function(e){t.textarea1=e},expression:"textarea1"}})],1),a("div",[a("el-button",{attrs:{type:"primary",icon:"el-icon-link"},on:{click:t.createLink_today}},[t._v("生成链接")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-document-copy"},on:{click:t.onCopy1}},[t._v("复制链接")])],1),a("el-divider",[a("i",{staticClass:"el-icon-paperclip"})]),a("div",{staticClass:"text item"},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"复盘数据查询链接生成位置"},model:{value:t.textarea2,callback:function(e){t.textarea2=e},expression:"textarea2"}})],1),a("div",[a("el-button",{attrs:{type:"primary",icon:"el-icon-link"},on:{click:t.createLink}},[t._v("生成链接")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-document-copy"},on:{click:t.onCopy2}},[t._v("复制链接")])],1)],1)],1)},n=[],i=a("b775");function o(t){return Object(i["a"])({url:"/secretkey/",method:"get",params:t})}var r=a("4e70"),c={filters:{statusFilter:function(t){var e={published:"success",draft:"gray",deleted:"danger"};return e[t]}},data:function(){return{list:null,listLoading:!0,textarea1:"",textarea2:"",changeForm:{type:"",key:""},id:""}},created:function(){this.fetchData()},methods:{fetchData:function(){var t=this;this.listLoading=!0,o().then((function(e){t.list=e.data.results,t.listLoading=!1}))},createLink_today:function(){var t=this;this.Loading=!0,Object(r["c"])().then((function(e){var a=e.data.key,s=e.data.base_url,n=s+"/today/?secretkey="+a+"&code=xxxxxx";t.textarea1=n,t.$message({message:"链接生成成功。",type:"success"}),t.Loading=!1}))},createLink:function(){var t=this;this.Loading=!0,Object(r["c"])().then((function(e){var a=e.data.key,s=e.data.base_url,n=s+"/charts/?secretkey="+a+"&code=xxxxxx";t.textarea2=n,t.$message({message:"链接生成成功。",type:"success"}),t.Loading=!1}))},changekeyip:function(t,e){var a=this;this.Loading=!0,this.id=e.id,this.changeForm.type="ip",this.changeForm.key=e.value,Object(r["a"])(this.changeForm,this.id).then((function(t){console.log(t),a.$message({message:"ip绑定成功。",type:"success"}),a.Loading=!1}))},changekeystatus:function(t,e){var a=this;this.Loading=!0,this.id=e.id,this.changeForm.type="status",this.changeForm.key=e.value,Object(r["a"])(this.changeForm,this.id).then((function(t){a.$message({message:"激活成功。",type:"success"}),a.Loading=!1}))},business_info_1:function(){this.$alert("在此页面生成您的专属链接，生成后复制链接，并将链接粘贴到通达信金融终端的 “自定义版面-行情资讯单元-通用浏览器-请输入文件路径或网址” 一栏的网址处，即可通过通达信联动访问","说明",{confirmButtonText:"确定"})},onCopy1:function(){var t=this;this.$copyText(this.textarea1).then((function(e){t.$message({message:"链接已复制到剪切板。",type:"success"})}),(function(e){t.$message({message:"一键复制失败，请手动复制。",type:"error"})}))},onCopy2:function(){var t=this;this.$copyText(this.textarea2).then((function(e){t.$message({message:"链接已复制到剪切板。",type:"success"})}),(function(e){t.$message({message:"一键复制失败，请手动复制。",type:"error"})}))},handleEdit:function(t,e){console.log(t,e)},handleDelete:function(t,e){console.log(t,e)}}},l=c,u=(a("2478"),a("2877")),d=Object(u["a"])(l,s,n,!1,null,null,null);e["default"]=d.exports},2478:function(t,e,a){"use strict";a("30f4")},"30f4":function(t,e,a){},"4e70":function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"a",(function(){return i})),a.d(e,"c",(function(){return o}));var s=a("b775");function n(t){return Object(s["a"])({url:"/secretkey/",method:"post",params:t})}function i(t,e){return Object(s["a"])({url:"/secretkey/"+e+"/",method:"patch",params:t})}function o(t){return Object(s["a"])({url:"/link/",method:"get",params:t})}}}]);