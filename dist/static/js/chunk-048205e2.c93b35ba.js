(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-048205e2"],{9406:function(s,e,t){"use strict";t.r(e);var i=function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticClass:"dashboard-container"},[t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[s._v("用户信息")])]),t("el-descriptions",{staticClass:"margin-top",attrs:{title:"基本信息",column:2,size:s.size,border:""}},[t("template",{slot:"extra"},[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){s.dialogFormVisible=!0}}},[s._v("修改密码")])],1),t("el-descriptions-item",[t("template",{slot:"label"},[t("i",{staticClass:"el-icon-user"}),s._v(" 用户名 ")]),s._v(" "+s._s(s.username)+" ")],2),t("el-descriptions-item",[t("template",{slot:"label"},[t("i",{staticClass:"el-icon-postcard"}),s._v(" 用户类别 ")]),t("el-tag",{attrs:{size:"small"}},[s._v(s._s(s.roles[0]))])],2),t("el-descriptions-item",[t("template",{slot:"label"},[t("i",{staticClass:"el-icon-message"}),s._v(" 用户邮箱 ")]),s._v(" "+s._s(s.email)+" ")],2),t("el-descriptions-item",[t("template",{slot:"label"},[t("i",{staticClass:"el-icon-time"}),s._v(" 上次登录 ")]),s._v(" "+s._s(s.last_login)+" ")],2)],2)],1),t("el-divider",[t("i",{staticClass:"el-icon-paperclip"})]),t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[s._v("业务信息")]),t("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:s.external_link}},[s._v("前往购买")])],1),t("el-descriptions",{staticClass:"margin-top",attrs:{title:"当日数据查询",column:2,size:s.size,border:""}},[t("template",{slot:"extra"},[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:s.business_info_1}},[t("i",{staticClass:"el-icon-search"}),s._v("详情")])],1),t("el-descriptions-item",[t("template",{slot:"label"},[t("i",{staticClass:"el-icon-user"}),s._v(" 剩余次数 ")]),s._v(" "+s._s(s.times)+"次 ")],2),t("el-descriptions-item",[t("template",{slot:"label"},[t("i",{staticClass:"el-icon-user"}),s._v(" 业务状态 ")]),t("el-tag",{attrs:{size:"small",type:"success"}},[s._v("正常")])],2)],2),t("el-divider",[t("i",{staticClass:"el-icon-paperclip"})]),t("el-descriptions",{staticClass:"margin-top",attrs:{title:"复盘数据查询",column:2,size:s.size,border:""}},[t("template",{slot:"extra"},[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:s.business_info_2}},[t("i",{staticClass:"el-icon-search"}),s._v("详情")])],1),t("el-descriptions-item",[t("template",{slot:"label"},[t("i",{staticClass:"el-icon-user"}),s._v(" 截至时间 ")]),s._v(" "+s._s(s.fin_time)+" ")],2),t("el-descriptions-item",[t("template",{slot:"label"},[t("i",{staticClass:"el-icon-user"}),s._v(" 业务状态 ")]),t("el-tag",{directives:[{name:"show",rawName:"v-show",value:"已激活"==s.business_activate[0],expression:"business_activate[0] == '已激活'"}],attrs:{size:"small",type:"success"}},[s._v(s._s(s.business_activate[0]))]),t("el-tag",{directives:[{name:"show",rawName:"v-show",value:"未激活"==s.business_activate[0],expression:"business_activate[0] == '未激活'"}],attrs:{size:"small",type:"info"}},[s._v(s._s(s.business_activate[0]))])],2)],2)],1),t("el-dialog",{attrs:{title:"修改密码",visible:s.dialogFormVisible,center:""},on:{"update:visible":function(e){s.dialogFormVisible=e}}},[t("div",{staticClass:"login-container"},[t("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:s.loginForm,rules:s.loginRules}},[t("div",{staticClass:"title-container"},[t("h3",{staticClass:"title"},[s._v("修改密码")])]),t("el-tooltip",{attrs:{content:"大写锁已打开",placement:"right",manual:""},model:{value:s.capsTooltip,callback:function(e){s.capsTooltip=e},expression:"capsTooltip"}},[t("el-form-item",{attrs:{prop:"password"}},[t("span",{staticClass:"svg-container"},[t("svg-icon",{attrs:{"icon-class":"password"}})],1),t("el-input",{key:s.passwordType,ref:"password",attrs:{type:s.passwordType,placeholder:"新密码",tabindex:"2",autocomplete:"on"},on:{blur:function(e){s.capsTooltip=!1}},nativeOn:{keyup:[function(e){return s.checkCapslock(e)},function(e){return!e.type.indexOf("key")&&s._k(e.keyCode,"enter",13,e.key,"Enter")?null:s.handleLogin(e)}]},model:{value:s.loginForm.password,callback:function(e){s.$set(s.loginForm,"password",e)},expression:"loginForm.password"}}),t("span",{staticClass:"show-pwd",on:{click:s.showPwd}},[t("svg-icon",{attrs:{"icon-class":"password"===s.passwordType?"eye":"eye-open"}})],1)],1)],1),t("el-tooltip",{attrs:{content:"大写锁已打开",placement:"right",manual:""},model:{value:s.recapsTooltip,callback:function(e){s.recapsTooltip=e},expression:"recapsTooltip"}},[t("el-form-item",{attrs:{prop:"repassword"}},[t("span",{staticClass:"svg-container"},[t("svg-icon",{attrs:{"icon-class":"password"}})],1),t("el-input",{key:s.repasswordType,ref:"repassword",attrs:{type:s.repasswordType,placeholder:"确认密码",tabindex:"3",autocomplete:"on"},on:{blur:function(e){s.recapsTooltip=!1}},nativeOn:{keyup:function(e){return s.recheckCapslock(e)}},model:{value:s.loginForm.repassword,callback:function(e){s.$set(s.loginForm,"repassword",e)},expression:"loginForm.repassword"}}),t("span",{staticClass:"show-pwd",on:{click:s.reshowPwd}},[t("svg-icon",{attrs:{"icon-class":"password"===s.repasswordType?"eye":"eye-open"}})],1)],1)],1)],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(e){s.dialogFormVisible=!1}}},[s._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(e){s.handleChangePWd(),s.dialogFormVisible=!1}}},[s._v("确 定")])],1)])],1)},a=[],o=t("1da1"),r=t("5530"),l=(t("96cf"),t("5880")),n=t("c24f"),c={name:"Dashboard",computed:Object(r["a"])({},Object(l["mapGetters"])(["username","roles","email","business_activate","times","fin_time","last_login","id"])),data:function(){var s=this,e=function(s,e,t){e.length<6?t(new Error("密码不能少于6位")):t()},t=function(e,t,i){""===t?i(new Error("请再次输入密码")):t!==s.loginForm.password?i(new Error("两次输入密码不一致!")):i()};return{size:"",dialogFormVisible:!1,formLabelWidth:"120px",loginForm:{password:"",repassword:""},loginRules:{password:[{required:!0,trigger:"blur",validator:e}],repassword:[{required:!0,trigger:"blur",validator:t}]},capsTooltip:!1,passwordType:"password",recapsTooltip:!1,repasswordType:"password",redirect:void 0}},watch:{$route:{handler:function(s){this.redirect=s.query&&s.query.redirect},immediate:!0}},methods:{showPwd:function(){var s=this;"password"===this.passwordType?this.passwordType="":this.passwordType="password",this.$nextTick((function(){s.$refs.password.focus()}))},checkCapslock:function(s){var e=s.key;this.capsTooltip=e&&1===e.length&&e>="A"&&e<="Z"},reshowPwd:function(){var s=this;"password"===this.repasswordType?this.repasswordType="":this.repasswordType="password",this.$nextTick((function(){s.$refs.repassword.focus()}))},recheckCapslock:function(s){var e=s.key;this.recapsTooltip=e&&1===e.length&&e>="A"&&e<="Z"},jumpUrl:function(s){var e=window.location.protocol+"//"+s;window.open(e,"_blank")},business_info_1:function(){this.$alert("当日数据查询业务，仅能查询当日数据。","业务说明",{confirmButtonText:"确定"})},business_info_2:function(){this.$alert("复盘数据查询业务，业务激活后，在业务到期前，用户可自由查询当日数据和历史数据数据。","业务说明",{confirmButtonText:"确定"})},external_link:function(){this.jumpUrl("www.taobao.com")},handleChangePWd:function(){var s=this,e=this.$store.state.user.id;this.$refs.loginForm.validate((function(t){if(!t)return console.log("error submit!!"),!1;s.loading=!0,Object(n["a"])(s.loginForm,e).then(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(202!==t.status){e.next=9;break}return s.$message({message:"修改成功，请重新登录。",type:"success"}),e.next=4,s.$store.dispatch("user/logout");case 4:s.$router.push("/login?redirect=".concat(s.$route.fullPath)),s.$router.push({path:s.redirect||"/"}),s.loading=!1,e.next=10;break;case 9:s.$message({message:"修改失败",type:"error"});case 10:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}())}))}}},p=c,d=(t("edbb"),t("2877")),u=Object(d["a"])(p,i,a,!1,null,"742d9a3b",null);e["default"]=u.exports},c7d7:function(s,e,t){},edbb:function(s,e,t){"use strict";t("c7d7")}}]);